<div class="timeline-container">
  <% unless scoring_pull_requests.empty? %>
    <h3 class="title is-3">Your contributions</h3><br/>
    <table class="is-narrow is-fullwidth">
      <tbody>
        <% @valid_pr = 0 %>
        <% if show_congratulations %>
          <tr>
            <td colspan="2">
              <div class="winning-msg-cont">
                <h2 class="winning-title">You did it! ðŸŽ‰</h2>
                <span class="winning-desc">You've made four eligible PRs for Hacktoberfest â€” which means you officially completed this yearâ€™s challenge!</span>
              </div>
            </td>
          </tr>
        <% end %>

        <% scoring_pull_requests.map.with_index do |pr| %>
          <% if pr.eligible? || pr.waiting? %>
            <%= render partial: 'users/show/pr/pr', locals: { pr: pr, valid_pr: @valid_pr +=1, show_congratulations: show_congratulations, pr_type: 1 }  %>
          <% else %>
            <%= render partial: 'users/show/pr/pr', locals: { pr: pr, valid_pr: @valid_pr, show_congratulations: show_congratulations, pr_type: 0 }  %>
          <% end %>
        <% end %>

        <% if scoring_pull_requests.length == 4 && !show_congratulations %>
          <tr>
            <td colspan="2">
              <div class="winning-msg-cont">
                <h2 class="winning-title">You're almost there!</h2>
                <span class="winning-desc">ðŸŽ‰ Youâ€™ve submitted the four required PRs for the Hacktoberfest challenge! So long as your PRs successfully pass the review period, theyâ€™ll become valid in â€” which means youâ€™ll have officially completed this yearâ€™s challenge!</span>
              </div>
            </td>
          </tr>
        <% end %>

        <% if non_scoring_pull_requests.any? %>
          <% non_scoring_pull_requests.map do |pr| %>
            <%= render partial: 'users/show/pr/pr', locals: { pr: pr, pr_type: 0, valid_pr: @valid_pr, show_congratulations: show_congratulations } %>
          <% end %>
        <% end %>
        
      </tbody>
    </table>
    <div class="legend has-text-white">
      <h4 class="title is-4">Legend</h4>
      <div class="legend-container">
        <div class="icon-box">
          <div class="pending-box">
          </div>
        </div>
        <div class="icon-name-desc">
          <div class="icon-name">
            In Review
          </div>
          <div class="icon-desc">
            Your PR has been accepted by a maintainer and is currently within the review period, which lasts for fourteen days.
          </div>
        </div>
      </div>
      <div class="legend-container">
        <div class="icon-box">
          <div class="unaccepted-box">
          </div>
        </div>
        <div class="icon-name-desc">
          <div class="icon-name">
            Pending
          </div>
          <div class="icon-desc">
            Your PR has not yet been accepted by a maintainer. A maintainer can accept your PR by merging it, adding the "hacktoberfest-accepted" label to it, or approving it.
          </div>
        </div>
      </div>
      <div class="legend-container">
        <div class="icon-box">
          <div class="invalid-box">
          </div>
        </div>
        <div class="icon-name-desc">
          <div class="icon-name">
            Invalid
          </div>
          <div class="icon-desc">
            Your PR has been labeled as "invalid" or "spam" by a maintainer and won't count toward winning Hacktoberfest.
          </div>
        </div>
      </div>
      <div class="legend-container">
        <div class="icon-box">
          <div class="ineligible-box">
          </div>
        </div>
        <div class="icon-name-desc">
          <div class="icon-name">
            Ineligible Repository
          </div>
          <div class="icon-desc">
            Your PR was submitted to a repository that is not participating in Hacktoberfest.
            Maintainers of the repository can add the "hacktoberfest" topic to their repository if they wish to participate.
            Alternatively, an individual PR can be opted-in with a maintainer adding the "hacktoberfest-accepted" label to the PR.
          </div>
        </div>
      </div>
      <div class="legend-container">
        <div class="icon-box">
          <div class="eligible-box">
          </div>
        </div>
        <div class="icon-name-desc">
          <div class="icon-name">
            Accepted
          </div>
          <div class="icon-desc">
            Good job! Your PR has passed the review period and counts toward completing the Hacktoberfest challenge!
          </div>
        </div>
      </div>
      <div class="legend-container">
        <div class="icon-box-bonus">
          <div class="bonus-box">
          </div>
        </div>
        <div class="icon-name-desc">
          <div class="icon-name">
            Bonus
          </div>
          <div class="icon-desc">
            Outstanding! Youâ€™ve gone above and beyond this Hacktoberfest.
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>
